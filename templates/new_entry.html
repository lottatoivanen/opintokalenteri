<html>

<head>
  <title>Uusi merkintä</title>
</head>

<link rel="stylesheet" href="/static/main.css">

<body class="center-page">
    {% if session.username %}
    <header class="top-bar">
        <h1 class="top-bar-title">Opintokalenteri</h1>
        <br>
        <nav class="top-bar-actions">
        <a class="btn btn--ghost" href="/">Etusivu</a>
        <a class="btn btn--ghost" href="/new_course">Lisää kurssi</a>
        <a class="btn btn--ghost" href="/new_entry">Uusi merkintä</a>
        <a class="btn btn--ghost" href="/find_entry">Etsi merkintä</a>
        <a class="btn btn--ghost" href="/all_courses">Muiden käyttäjien kurssit</a>
        <a class="btn btn--ghost" href="/user/{{ session.username }}">Omat sivut</a>
        <a class="btn btn--ghost" href="/logout">Kirjaudu ulos</a>
        </nav>
    </header>
    <header class="form-top-bar">
        <h1 class="form-top-bar-title">Uusi merkintä</h1>
    </header>
  <form class="form-style" action="/create_entry" method="post">
    <p>
      Otsikko: <br />
      <input type="text" name="title" maxlength="50" required/>
    </p>
    <br>
    <p>
        Kuvaus: <br />
        <textarea name="description" rows="5" cols="40" maxlength="1000" required></textarea>
    </p>
    <br>
    <p>
      Aikaraja: <br />
      <input type="date" name="date" pattern="\d{4}-\d{2}-\d{2}" required />
    </p>
    <br>
    <p>
      Kurssi: <br />
        <select name="course_id">
            <option value="" {% if not selected_course_id %}selected{% endif %}>Ei kurssia</option>
          {% for course in all_courses %}
            <option value="{{ course.id }}"
              {% if selected_course_id and course.id == selected_course_id|int %}selected{% endif %}
            >
              {{ course.name }}
            </option>
          {% endfor %}
        </select>
    </p>
    <br>
    {% for tag in all_tags %}
        <p>
        {{ tag }}: <br />
        {% for value in all_tags[tag] %}
            <input type="checkbox" name="tags" value="{{ tag }}:{{ value }}"> {{ value }}<br />
        {% endfor %}
        </p>
    {% endfor %}
    <br>
    <input type="hidden" name="selected_course_id" value="{{ selected_course_id }}"/>
    <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
    <input type="submit" name="create" value="Luo merkintä" class="btn btn--small"/>
    <a href="/" class="btn btn--small">Peruuta</a>
  </form>

  {% endif %}

    {% if not session.username %}
    <header class="top-bar">
        <h1 class="top-bar-title">Opintokalenteri</h1>
        <nav class="top-bar-actions">
        <a class="btn btn--ghost" href="/login">Kirjaudu sisään</a>
        <a class="btn btn--ghost" href="/register">Rekisteröidy</a>
        </nav>
    </header>
    {% endif %}
</body>

</html>